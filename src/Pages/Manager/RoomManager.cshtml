@page "/user/manager/room/{id:int}"
@model RoomManagerModel
@{
    ViewData["style"] = "~/css/roommanage.css";
}

<h1>Manage rooms</h1>
<div id="display-management">
    <div class="room-management">
        <ul>
            @foreach(var rm in Model.userManagedRooms)
            {
                <li class="item-manager">
                    <span>@rm.Name</span> -
                    <span>@rm.Description</span> -
                    <span>Actions:</span>
                    <form method="post" id="form-manager">
                        @Html.Hidden("RoomId", rm.Id)
                        <button class="btn btn-success"
                                asp-page-handler="Edit">Edit</button> | 
                        <button class="btn btn-danger">Delete</button>
                    </form>
                </li>
                <br>
            }
        </ul>
    </div>
    <hr>
    <div class="room-included">
        <ul>
            @foreach(var ri in Model.userIncludedRooms)
            {
                <li class="item-included">
                    <p>@ri.Name</p>
                </li>
            }
        </ul>
    </div>
</div>

<script>
    @* document.addEventListener("submit", event => {
        event.preventDefault();

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "http://localhost:5229/user/manager/room/@Model.currentUserManager.Id?handle=Edit");
        xhr.onload = event => {
            alert("Server response: "+ event.target.response);
        };
        var formData = new FormData(document.getElementById("form-manager"));
        xhr.send(formData);
    }) *@
</script>
